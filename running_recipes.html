<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Running dvas recipes &mdash; dvas  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Creating dvas recipes" href="creating_recipes.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> dvas
          </a>
              <div class="version">
                0.5.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Running dvas recipes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#anatomy-of-a-dvas-processing-arena">Anatomy of a dvas processing arena</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-data-folder">The data folder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-config-folder">The config folder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-recipe-file">The recipe file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#specific-recipes">Specific recipes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#demo">demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uaii22">uaii22</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="creating_recipes.html">Creating dvas recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledge.html">Acknowledging dvas</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License &amp; Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/MeteoSwiss-MDA/dvas/blob/develop/CONTRIBUTING.md">Contributing</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/MeteoSwiss-MDA/dvas">Github repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_todo.html">Documentation todos</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">dvas</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Running dvas recipes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/running_recipes.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="running-dvas-recipes">
<span id="running"></span><h1>Running dvas recipes<a class="headerlink" href="#running-dvas-recipes" title="Permalink to this headline"></a></h1>
<p>dvas recipes are pre-packaged, pre-configured analysis pipelines, designed to perform
<strong>specific tasks in a specific order</strong>. Their primary purpose is to allow any official dvas analysis
to be reproduced by anyone, anywhere.</p>
<p>As an example, we will use the case of the UAII 2022 campaign, for which a dedicated dvas recipe was
created. Once dvas has been <a class="reference internal" href="installation.html#install"><span class="std std-ref">installed</span></a>, follow these steps to reproduce the entire
UAII 2022 analysis cascade:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Initialize a new dvas <em>processing arena</em>. In a terminal, in a location of your choice, type:</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dvas_init_arena
</pre></div>
</div>
<p>This will create a new folder <code class="docutils literal notranslate"><span class="pre">dvas_proc_arena</span></code>.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">dvas_init_arena</span> <span class="pre">--help</span></code> to see what options exist:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>usage: dvas_init_arena [-h] [--path ./a/new/folder/]

DVAS 0.5.0 - Data Visualization and Analysis Software: Initialization entry point.

optional arguments:
  -h, --help            show this help message and exit
  --path ./a/new/folder/
                        Relative path &amp; name for the new processing arena.

For more info: https://MeteoSwiss.github.io/dvas
 
</pre></div>
</div>
</div>
</div></blockquote>
<p>2. The processing arena you just created got pre-filled with 1) a series of configuration files
for the dvas database (more on this below), 2) a <cite>dvas_demo.py</cite> script meant for advanced users,
and 3) the official dvas recipe files, including <cite>uaii22.rcp</cite>.
To execute this recipe, use the <cite>dvas_run_recipe</cite> entry point from the command line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd dvas_proc_arena
dvas_run_recipe uaii22.rcp
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--flights</span></code> argument allows to specify a list of specific flights (identified using their
event id and rig id) to be processed. See <code class="docutils literal notranslate"><span class="pre">dvas_run_recipe</span> <span class="pre">--help</span></code> for details.</p>
</div>
</div></blockquote>
<p>Launching the recipe was the easy part. But what is actually happening ?  Time to take a
closer look at the …</p>
<section id="anatomy-of-a-dvas-processing-arena">
<h2>Anatomy of a dvas processing arena<a class="headerlink" href="#anatomy-of-a-dvas-processing-arena" title="Permalink to this headline"></a></h2>
<p>There are 3 main components to a dvas processing arena: the
<a class="reference internal" href="#raw-data"><span class="std std-ref">raw data</span></a>,
the <a class="reference internal" href="#config-data"><span class="std std-ref">database config files</span></a>,
and the <a class="reference internal" href="#recipe-file"><span class="std std-ref">recipe file</span></a>. Let’s take a closer look at each of these.</p>
<section id="the-data-folder">
<span id="raw-data"></span><h3>The data folder<a class="headerlink" href="#the-data-folder" title="Permalink to this headline"></a></h3>
<p>This folder contains all the raw data to be processed. The actual structuring of subfolders inside
<cite>./data</cite> does not actually matter to dvas, so feel free to organize your datasets as you please.
Note, however, the following restrictions:</p>
<blockquote>
<div><ul>
<li><p>for non-GDP radiosondes: a <cite>.yml</cite> text file <strong>with the same name</strong> as the raw data file must be
specified for all datasets. These <cite>.yml</cite> fiels must contain all the metadata not otherwise
present in the raw data files.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Specify what these metadata should be</p>
</div>
</li>
</ul>
</div></blockquote>
</section>
<section id="the-config-folder">
<span id="config-data"></span><h3>The config folder<a class="headerlink" href="#the-config-folder" title="Permalink to this headline"></a></h3>
<p>This folder contains all the information required to setup the dvas database, and have it ingest all
the raw data correctly. Modifying these files is only required if one wishes to include datasets
that differ from those already supported by dvas.</p>
</section>
<section id="the-recipe-file">
<span id="recipe-file"></span><h3>The recipe file<a class="headerlink" href="#the-recipe-file" title="Permalink to this headline"></a></h3>
<p>The dvas recipes are described in YAML file with the <cite>.rcp</cite> extension. In there, you will find
general recipe parameters, including the list of variable names to process, together with the list
of all the processing steps and their associated parameters. All these steps refer to high-level
routines and modules from the <code class="docutils literal notranslate"><span class="pre">dvas_recipes</span></code> sub-package, that themselves rely on core <code class="docutils literal notranslate"><span class="pre">dvas</span></code>
modules and functions.</p>
</section>
</section>
<section id="specific-recipes">
<h2>Specific recipes<a class="headerlink" href="#specific-recipes" title="Permalink to this headline"></a></h2>
<section id="demo">
<h3>demo<a class="headerlink" href="#demo" title="Permalink to this headline"></a></h3>
<p>Used for test and development purposes. It contains dummy routines to illustrate how recipe
processing steps can be assembled.</p>
</section>
<section id="uaii22">
<h3>uaii22<a class="headerlink" href="#uaii22" title="Permalink to this headline"></a></h3>
<p>Performs the official UAII 2022 analysis for the field campaign data.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="creating_recipes.html" class="btn btn-neutral float-right" title="Creating dvas recipes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022, MeteoSwiss.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>